@model NETCORE.Models.CheckoutViewModel

@{
    Layout= null;
    ViewData["Title"] = "Checkout";
}
<head>
    <meta name="description" content="">
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/NETCORE.styles.css" asp-append-version="true" />
    <meta property="og:title" content="Thực phẩm sạch Nhanh.vn">

    <meta property="og:url" content="http://t0307.store.nhanh.vn">
    <meta property="og:image" content="https://pos.nvncdn.com/16a837-71503/store/20200325_7rMt2KlqTHJrITcloxlSka0u.png">
    <meta name="google-site-verification" content="">
    <link href="http://t0307.store.nhanh.vn" rel="canonical">
    <link href="https://pos.nvncdn.com/16a837-71503/store/20200325_ZRJHulhsIfpehzWImFaQoMVt.png" rel="icon"
        type="image/vnd.microsoft.icon">
    <link rel="preload" href="https://web.nvnstatic.net/tp/T0307/font/Quicksand-VariableFont_wght.ttf" as="font"
        type="font/ttf" crossorigin="">
    <link rel="stylesheet" href="https://web.nvnstatic.net/css/bootstrap/bootstrap.4.3.1.min.css?v=26" type="text/css">
    <link rel="stylesheet" href="https://web.nvnstatic.net/css/fontAwesome/font-awesome-4.7.0.min.css?v=26"
        type="text/css">
    <link rel="stylesheet" href="https://web.nvnstatic.net/css/fancybox-4.0.31/fancybox_4.0.31.css?v=26"
        type="text/css">
    <link rel="stylesheet" href="https://web.nvnstatic.net/css/font.css?v=26" type="text/css">
    <link rel="stylesheet" href="https://web.nvnstatic.net/js/mmenu/css/jquery.mmenu.css?v=26" type="text/css">
    <link rel="stylesheet" href="https://web.nvnstatic.net/css/jqueryUI/jqui.css?v=26" type="text/css">
    <link rel="stylesheet" href="https://web.nvnstatic.net/css/owlCarousel/owl.carousel.min.2.3.4.css?v=26"
        type="text/css">
    <link rel="stylesheet" href="https://web.nvnstatic.net/css/appLib.css" type="text/css">
    <link rel="stylesheet" href="https://web.nvnstatic.net/tp/T0307/css/style.css?v=69" type="text/css">

    <script defer="" type="text/javascript" src="https://web.nvnstatic.net/js/jquery/jquery.cookie.js?v=104"></script>
    <script defer="" type="text/javascript"
        src="https://web.nvnstatic.net/js/bootstrap/boostrap.popper.min.js?v=104"></script>
    <script defer="" type="text/javascript"
        src="https://web.nvnstatic.net/js/jquery/jquery-ui-1.10.3.custom.min.js?v=104"></script>
    <script defer="" type="text/javascript"
        src="https://web.nvnstatic.net/js/bootstrap/bootstrap.4.3.1.min.js?v=104"></script>
    <script defer="" type="text/javascript"
        src="https://web.nvnstatic.net/js/jquery/jquery.number.min.js?v=104"></script>
    <script defer="" type="text/javascript"
        src="https://web.nvnstatic.net/js/jquery/fancybox-4.0.31/fancybox_4.0.31.js?v=104">
        </script>
    <script defer="" type="text/javascript"
        src="https://web.nvnstatic.net/js/owlCarousel/owl.carousel.min.js?v=104"></script>
    <script defer="" type="text/javascript"
        src="https://web.nvnstatic.net/js/mmenu/js/jquery.mmenu.min.js?v=104"></script>
    <script defer="" type="text/javascript" src="https://web.nvnstatic.net/js/lib.js?v=104"></script>
    <script defer="" type="text/javascript" src="https://web.nvnstatic.net/tp/T0307/js/main.js?v=54"></script>
</head>
<hr />
<form asp-action="Pay">
    <div class="row">
        <div class="col-md-4">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <label class="control-label">Payment method</label>
            <select asp-for="PaymentMethod" class="form-select" aria-label="Payment method">
                <option selected>VNPay</option>
            </select>
            <div class="form-group">
                <label asp-for="FullName" class="control-label"></label>
                <input asp-for="FullName" class="form-control" />
                <span asp-validation-for="FullName" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Address" class="control-label"></label>
                <input asp-for="Address" class="form-control" />
                <span asp-validation-for="Address" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="PhoneNumber" class="control-label"></label>
                <input asp-for="PhoneNumber" class="form-control" />
                <span asp-validation-for="PhoneNumber" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Note" class="control-label"></label>
                <textarea asp-for="Note" class="form-control"></textarea>
                <span asp-validation-for="Note" class="text-danger"></span>
            </div>
            <div class="form-group mt-2">
                <input type="submit" value="Submit" class="btn btn-primary" />
            </div>
        </div>

        <div class="col-md-8">
            <div class="form-group">
                <label asp-for="Amount" class="control-label"></label>
                <div class="input-group">
                    <span class="input-group-text">VND</span>
                    <input  onkeyup="formatCurrencyAndConvertToWords(this);" type="text" asp-for="Amount" class="form-control vnd-input" />
                </div>
                <i id="text_amount"></i>
                <span asp-validation-for="Amount" class="text-danger"></span>
            </div>
        </div>
    </div>
</form>

@section Scripts {
<script>
function formatCurrencyAndConvertToWords(input) {
    // Remove all non-digit characters
    let value = input.value.replace(/\D/g, '');

    // Kiểm tra số ký tự không vượt quá 9
    if (value.length > 9) {
        value = value.slice(0, 9);
    }

    // Format number with thousand separators
    input.value = value.replace(/\B(?=(\d{3})+(?!\d))/g, '.');

    // Convert number to words and display
    document.getElementById('text_amount').innerText = capitalizeFirstLetter(numberToWords(value)) + ' đồng';
}

function numberToWords(num) {
    const units = ["", "một", "hai", "ba", "bốn", "năm", "sáu", "bảy", "tám", "chín"];
    const teens = ["mười", "mười một", "mười hai", "mười ba", "mười bốn", "mười lăm", "mười sáu", "mười bảy", "mười tám", "mười chín"];
    const tens = ["", "", "hai mươi", "ba mươi", "bốn mươi", "năm mươi", "sáu mươi", "bảy mươi", "tám mươi", "chín mươi"];
    const thousands = ["", "nghìn", "triệu", "tỷ"];

    if (num === "0") return "không";

    let words = '';
    let k = 0;

    while (num.length > 0) {
        let chunk = parseInt(num.slice(-3), 10);
        num = num.slice(0, -3);

        if (chunk) {
            let chunkWords = '';
            if (chunk > 99) {
                chunkWords += units[Math.floor(chunk / 100)] + " trăm ";
                chunk %= 100;
            }
            if (chunk > 19) {
                chunkWords += tens[Math.floor(chunk / 10)] + " ";
                chunk %= 10;
            } else if (chunk > 9) {
                chunkWords += teens[chunk - 10] + " ";
                chunk = 0;
            }
            if (chunk > 0) {
                chunkWords += units[chunk] + " ";
            }
            words = chunkWords + thousands[k] + " " + words;
        }
        k++;
    }

    return words.trim();
}

function capitalizeFirstLetter(text) {
    // Chuyển đổi chữ cái đầu tiên của câu thành chữ hoa
    return text.charAt(0).toUpperCase() + text.slice(1);
}
</script>



    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
<style>
    /* Cải thiện form */
    
.form-group {
    margin-left: 20px;
    margin-bottom: 1rem;
}

/* Tạo các lớp để làm đẹp cho các label và input */
.control-label {
    font-weight: bold;
}

.form-select,
.form-control,
textarea {
    width: 100%; /* Đảm bảo các input có chiều rộng đầy đủ */
    padding: 0.5rem; /* Thêm một chút padding để không quá chật */
    margin-top: 0.5rem;
}

textarea {
    resize: vertical; /* Cho phép người dùng thay đổi kích thước chiều cao của textarea */
}

.input-group-text {
    background-color: #f1f1f1; /* Màu nền của phần tiền tệ */
}

/* Cải thiện các trường thông báo lỗi */
.text-danger {
    font-size: 0.9rem;
    color: #dc3545; /* Màu đỏ cho các lỗi */
}

/* Cải thiện nút submit */
.btn-primary {
    background-color: #007bff;
    color: white;
    border: none;
    padding: 0.5rem 1rem;
    font-size: 1rem;
    cursor: pointer;
    border-radius: 5px;
    transition: background-color 0.3s ease;
}

.btn-primary:hover {
    background-color: #0056b3;
}

</style>